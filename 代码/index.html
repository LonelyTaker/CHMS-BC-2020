<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>智能社区健康管理系统</title>
  <link rel="stylesheet" href="css/layui.css">
  <link rel="stylesheet" href="css/data.css">
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
  <div class="layui-header">
    <div class="layui-logo"  style="font-size:1.3em;font-weight:bold;">智能社区健康管理系统</div>
    <!-- 头部区域（可配合layui已有的水平导航） -->
    <ul class="layui-nav layui-layout-left">
      <li class="layui-nav-item "><a href="announce.php">公告</a></li>
      <li class="layui-nav-item layui-this"><a href="index.html">健康数据</a></li>
      <li class="layui-nav-item"><a href="assess_status.html">智能健康评估</a></li>
      <li class="layui-nav-item"><a href="manage_advice.html">健康生活服务</a></li>
    </ul>

    <ul class="layui-nav layui-layout-right">
      <li id="user" class="layui-nav-item">
        <a href="javascript:;">
          测试数据
        </a>
      </li>
      <li class="layui-nav-item">
        <a href="javascript:void(0);" onclick="logout()">
          退出登录
        </a>
      </li>
    </ul>
  </div>
  
  <div class="layui-side layui-bg-black">
    <div class="layui-side-scroll">
      <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
      <ul class="layui-nav layui-nav-tree"  lay-filter="test">
        <li class="layui-nav-item layui-this"><a href="index.html">每日健康数据</a></li>
        <li class="layui-nav-item"><a href="data_history.html">历史健康数据</a></li>
      </ul>
    </div>
  </div>
  
  <div class="layui-body">
    <!-- 内容主体区域 -->

  <div style="padding: 20px; background-color: #F2F2F2;">
  <div class="layui-row layui-col-space15">
    <div class="layui-col-md6">
      <div class="layui-card">
        <div class="layui-card-header">体温</div>
        <div class="layui-card-body">
          <input id="edit_temperature" type="text" style="width: 70px;" placeholder="请输入体温">
          <br>
          <p>℃</p>
        </div>
      </div>
    </div>
    <div class="layui-col-md6">
      <div class="layui-card">
        <div class="layui-card-header">血压</div>
        <div class="layui-card-body">
          <input id="edit_spressure" type="text" style="width: 50px;" placeholder="收缩压">&nbsp;/&nbsp;<input id="edit_dpressure" type="text" style="width: 50px;" placeholder="舒张压"><br>
          <p>mmHg</p>
        </div>
      </div>
    </div>
    <div class="layui-col-md6">
      <div class="layui-card">
        <div class="layui-card-header">心率</div>
        <div class="layui-card-body">
          <input id="edit_heartRate" type="text" style="width: 70px;" placeholder="请输入心率"><br>
          <p>次/分</p>
        </div>
      </div>
    </div>
    <div class="layui-col-md6">
      <div class="layui-card">
        <div class="layui-card-header">身高</div>
        <div class="layui-card-body">
          <input id="edit_height" type="text" style="width: 70px;" placeholder="请输入身高"><br>
          <p>cm</p>
        </div>
      </div>
    </div>
    <div class="layui-col-md6">
      <div class="layui-card">
        <div class="layui-card-header">体重</div>
        <div class="layui-card-body">
          <input id="edit_weight" type="text" style="width: 70px;" placeholder="请输入体重"><br>
          <p>kg</p>
        </div>
      </div>
    </div>

    <div class="layui-col-md6">
      <div class="layui-card">
        <div class="layui-card-header">腰围</div>
        <div class="layui-card-body">
          <input id="edit_waist" type="text" style="width: 70px;" placeholder="请输入腰围"><br>
          <p>cm</p>
        </div>
      </div>
    </div>

  </div>
</div> 
<button id="update" type="button" style="position: relative;top: 30px;left: 30px;">提交</button>
  </div>
  
  <div class="layui-footer">
    <!-- 底部固定区域 -->
    © myhealth.com - 智能社区健康管理系统
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
  <script src="js/initialization.js"></script>
  <script>
    function useritem(){
      window.location.href="information.html";
    }
    function clear_edit(){
      $("#edit_temperature").val("");
      $("#edit_spressure").val("");
      $("#edit_dpressure").val("");
      $("#edit_heartRate").val("");
      $("#edit_height").val("");
      $("#edit_weight").val("");
      $("#edit_waist").val("");
    }
    $("#update").click(function(){
      if ($("#edit_temperature").val()=="") {
        alert("请输入体温");
      }
      else if($("#edit_spressure").val()==""){
        alert("请输入收缩压");
      }
      else if($("#edit_dpressure").val()==""){
        alert("请输入舒张压");
      }
      else if($("#edit_heartRate").val()==""){
        alert("请输入心率");
      }
      else if($("#edit_height").val()==""){
        alert("请输入身高");
      }
      else if($("#edit_weight").val()==""){
        alert("请输入体重");
      }
      else if($("#edit_waist").val()==""){
        alert("请输入腰围");
      }
      else{
        var up_data=new FormData();
        up_data.append('temperature',$("#edit_temperature").val());
        up_data.append('spressure',$("#edit_spressure").val());
        up_data.append('dpressure',$("#edit_dpressure").val());
        up_data.append('heartRate',$("#edit_heartRate").val());
        up_data.append('height',$("#edit_height").val());
        up_data.append('weight',$("#edit_weight").val());
        up_data.append('waist',$("#edit_waist").val());
        $.ajax({
          url: 'php/healthdata_up.php',
          type: 'POST',
          data:up_data,
          contentType: false,
          processData: false,
          success: function(json){
            var data=JSON.parse(json);
            if (data.feedback=="up_success") {
              alert("提交成功");
              clear_edit();
            }
            else if (data.feedback=="update_success"){
              alert("修改成功");
              clear_edit();
            }
            else{
              alert("错误");
            }
          },
        });
      }
    });

</script>
</body>
</html>